{"root":{"data":{"id":"db6fhyyhysw0","created":1751952977466,"text":"chart部署健康诊断"},"children":[{"data":{"id":"db6fsyjxwrk0","created":1751953838591,"text":"收集资源","layout_mind_offset":{"x":2,"y":-90},"layout_right_offset":{"x":12,"y":-1},"expandState":"expand"},"children":[{"data":{"id":"db6fvcagelk0","created":1751954025221,"text":"根据namespace, componentName获取helm release相关的资源\n(pod,service,deployment等等)","expandState":"expand"},"children":[{"data":{"id":"db7biuovq340","created":1752043322058,"text":"细分成workload(副本控制器), services, 其他的忽略"},"children":[]},{"data":{"id":"db7blhqjyjk0","created":1752043528954,"text":"workload获取具体pod","expandState":"expand"},"children":[{"data":{"id":"db6fw7rdbx40","created":1751954093724,"text":"获取 异常 pod 日志"},"children":[{"data":{"id":"db6hso32w940","created":1751959458024,"text":"1. 如果pod的当前容器状态是crashbackoff，取最后100行日志\n2. 如果pod的上一个退出的容器状态是crashbackoff，取上一个容器日志最后100行"},"children":[]}]}]}]},{"data":{"id":"db6fvmab9gw0","created":1751954046980,"text":"收集 k8s 事件"},"children":[]}]},{"data":{"id":"db6ftmt1e5c0","created":1751953891384,"text":"资源诊断","expandState":"expand"},"children":[{"data":{"id":"db870w5cqr40","created":1752132190193,"text":"helmrelease,helmchart,helmrepository诊断"},"children":[]},{"data":{"id":"db6hpzxklpk0","created":1751959248720,"text":"事件诊断","layout_right_offset":{"x":41,"y":9},"expandState":"expand"},"children":[{"data":{"id":"db7bmj4xqtc0","created":1752043610364,"text":"判断 REASON"},"children":[{"data":{"id":"db7br4czpa00","created":1752043970020,"text":"Pulling"},"children":[]},{"data":{"id":"db7bs7n88xk0","created":1752044055534,"text":"BackOff"},"children":[{"data":{"id":"db7bs9ad3kw0","created":1752044059110,"text":"过滤事件关键字"},"children":[{"data":{"id":"db7bsd3grvk0","created":1752044067400,"text":"pulling image，拉取镜像失败"},"children":[]},{"data":{"id":"db7ddgi0kc80","created":1752048541567,"text":"Insufficient cpu"},"children":[{"data":{"id":"db7de43xuo00","created":1752048592959,"text":"cpu不足"},"children":[]}]},{"data":{"id":"db7de6ikveg0","created":1752048598198,"text":"Insufficient memory"},"children":[{"data":{"id":"db7de9gbb0w0","created":1752048604591,"text":"memory不足"},"children":[]}]}]}]},{"data":{"id":"db7bt0qv6lc0","created":1752044118881,"text":"... ..."},"children":[]}]},{"data":{"id":"db7zxhcqleo0","created":1752112175126,"text":"生成总结和建议"},"children":[]}]},{"data":{"id":"db6ftjzk2r40","created":1751953885248,"text":"pod诊断","layout_right_offset":{"x":41,"y":9},"expandState":"expand"},"children":[{"data":{"id":"db82ezwvnq80","created":1752119189937,"text":"检查"},"children":[{"data":{"id":"db7bzc4nneo0","created":1752044613844,"text":"检查 phase"},"children":[{"data":{"id":"db7bzkpbr2g0","created":1752044632508,"text":"pending"},"children":[{"data":{"id":"db7bzmj2skg0","created":1752044636484,"text":"未调度"},"children":[]}]},{"data":{"id":"db7bzvxx1d40","created":1752044656972,"text":"successed"},"children":[{"data":{"id":"db7c04n7nio0","created":1752044675916,"text":"已完成，一般是job"},"children":[]}]},{"data":{"id":"db7bzhwrzvs0","created":1752044626428,"text":"Running","expandState":"expand"},"children":[{"data":{"id":"db7bmqq4bj40","created":1752043626883,"text":"initContainerStatuses"},"children":[{"data":{"id":"db7bw1oh8ow0","created":1752044356006,"text":"ready: true 正常"},"children":[]},{"data":{"id":"db7byjgjrio0","created":1752044551436,"text":"ready: false 异常"},"children":[{"data":{"id":"db7byn3xrko0","created":1752044559381,"text":"获取初始化容器状态"},"children":[{"data":{"id":"db7bqh8dnao0","created":1752043919676,"text":"pullImageBackoff"},"children":[]},{"data":{"id":"db7bon4l6nk0","created":1752043775779,"text":"crashbackoff "},"children":[{"data":{"id":"db7bpgvkm8w0","created":1752043840537,"text":"过滤日志关键字"},"children":[{"data":{"id":"db7bplppjc80","created":1752043851066,"text":"at lease 416k, 栈内存太小"},"children":[]}]}]},{"data":{"id":"db7dcpvbg0w0","created":1752048483598,"text":"... ..."},"children":[]}]}]}]},{"data":{"id":"db7by4b1ce00","created":1752044518451,"text":"containerStatuses","expandState":"expand"},"children":[{"data":{"id":"db7db60ocyo0","created":1752048362023,"text":"ready: true 正常"},"children":[]},{"data":{"id":"db7dboksutk0","created":1752048402422,"text":"ready: false 异常"},"children":[{"data":{"id":"db7byn3xrko0","created":1752044559381,"text":"获取容器状态"},"children":[{"data":{"id":"db7bqh8dnao0","created":1752043919676,"text":"pullImageBackoff"},"children":[]},{"data":{"id":"db7bon4l6nk0","created":1752043775779,"text":"crashbackoff "},"children":[{"data":{"id":"db7bpgvkm8w0","created":1752043840537,"text":"过滤日志关键字"},"children":[{"data":{"id":"db7bplppjc80","created":1752043851066,"text":"at lease 416k, 栈内存太小"},"children":[]}]}]},{"data":{"id":"db7dcpvbg0w0","created":1752048483598,"text":"... ..."},"children":[]}]}]}]}]},{"data":{"id":"db7dauspt9k0","created":1752048337597,"text":"Unkown"},"children":[{"data":{"id":"db7dayutttc0","created":1752048346431,"text":"异常"},"children":[]}]}]}]},{"data":{"id":"db82eydlilc0","created":1752119186594,"text":"生成总结和建议"},"children":[]}]},{"data":{"id":"db6hptxosns0","created":1751959235666,"text":"service诊断","layout_right_offset":{"x":48,"y":-8},"expandState":"expand"},"children":[{"data":{"id":"db7df00i9e00","created":1752048662408,"text":"... ..."},"children":[]}]},{"data":{"id":"db6hqv1i5pc0","created":1751959316438,"text":"... ...","layout_right_offset":{"x":60,"y":30}},"children":[]}]},{"data":{"id":"db6ftr7sn7s0","created":1751953900984,"text":"结果整合"},"children":[{"data":{"id":"db7zvydt5ug0","created":1752112055468,"text":"展示workload，service，event"},"children":[]},{"data":{"id":"db890p32uk80","created":1752137817038,"text":"总结，建议"},"children":[]}]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}