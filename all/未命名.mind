{"root":{"data":{"id":"db6fhyyhysw0","created":1751952977466,"text":"chart部署健康诊断"},"children":[{"data":{"id":"db6fsyjxwrk0","created":1751953838591,"text":"收集资源","layout_mind_offset":{"x":2,"y":-90},"layout_right_offset":{"x":12,"y":-1}},"children":[{"data":{"id":"db6fvcagelk0","created":1751954025221,"text":"根据namespace, componentName获取helm release相关的资源\n(pod,service,deployment等等)","expandState":"expand"},"children":[{"data":{"id":"db7biuovq340","created":1752043322058,"text":"细分成workload(副本控制器), services, 其他的忽略"},"children":[]},{"data":{"id":"db7blhqjyjk0","created":1752043528954,"text":"workload获取具体pod","expandState":"expand"},"children":[{"data":{"id":"db6fw7rdbx40","created":1751954093724,"text":"获取 异常 pod 日志"},"children":[{"data":{"id":"db6hso32w940","created":1751959458024,"text":"1. 如果pod的当前容器状态是crashbackoff，取最后100行日志\n2. 如果pod的上一个退出的容器状态是crashbackoff，取上一个容器日志最后100行"},"children":[]}]}]}]},{"data":{"id":"db6fvmab9gw0","created":1751954046980,"text":"收集 k8s 事件"},"children":[]}]},{"data":{"id":"db6ftmt1e5c0","created":1751953891384,"text":"资源诊断","expandState":"expand"},"children":[{"data":{"id":"db6hrq3r6n40","created":1751959384054,"text":"如果非ai，用关键字诊断","expandState":"expand"},"children":[{"data":{"id":"db6hpzxklpk0","created":1751959248720,"text":"事件诊断","layout_right_offset":{"x":41,"y":9}},"children":[{"data":{"id":"db7bmj4xqtc0","created":1752043610364,"text":"判断 REASON"},"children":[{"data":{"id":"db7br4czpa00","created":1752043970020,"text":"Pulling"},"children":[]},{"data":{"id":"db7bs7n88xk0","created":1752044055534,"text":"BackOff"},"children":[{"data":{"id":"db7bs9ad3kw0","created":1752044059110,"text":"过滤事件关键字"},"children":[{"data":{"id":"db7bsd3grvk0","created":1752044067400,"text":"pulling image，拉取镜像失败"},"children":[]}]}]},{"data":{"id":"db7bt0qv6lc0","created":1752044118881,"text":"... ..."},"children":[]}]},{"data":{"id":"db7bp0mrnl40","created":1752043805176,"text":"过滤事件关键字"},"children":[]}]},{"data":{"id":"db6ftjzk2r40","created":1751953885248,"text":"pod诊断","layout_right_offset":{"x":41,"y":9}},"children":[{"data":{"id":"db7bzc4nneo0","created":1752044613844,"text":"检查 phase"},"children":[{"data":{"id":"db7bzkpbr2g0","created":1752044632508,"text":"pending"},"children":[{"data":{"id":"db7bzmj2skg0","created":1752044636484,"text":"未调度"},"children":[]}]},{"data":{"id":"db7bzvxx1d40","created":1752044656972,"text":"successed"},"children":[{"data":{"id":"db7c04n7nio0","created":1752044675916,"text":"已完成，一般是job"},"children":[]}]},{"data":{"id":"db7bzhwrzvs0","created":1752044626428,"text":"Running","expandState":"expand"},"children":[{"data":{"id":"db7bmqq4bj40","created":1752043626883,"text":"initContainerStatuses"},"children":[{"data":{"id":"db7bw1oh8ow0","created":1752044356006,"text":"ready: true"},"children":[{"data":{"id":"db7byfbo9zk0","created":1752044542435,"text":"正常"},"children":[]}]},{"data":{"id":"db7byjgjrio0","created":1752044551436,"text":"ready: false"},"children":[{"data":{"id":"db7byn3xrko0","created":1752044559381,"text":"获取初始化容器状态"},"children":[{"data":{"id":"db7bqh8dnao0","created":1752043919676,"text":"pullImageBackoff"},"children":[]},{"data":{"id":"db7bon4l6nk0","created":1752043775779,"text":"crashbackoff "},"children":[{"data":{"id":"db7bpgvkm8w0","created":1752043840537,"text":"过滤日志关键字"},"children":[{"data":{"id":"db7bplppjc80","created":1752043851066,"text":"at lease 416k, 栈内存太小"},"children":[{"data":{"id":"db7db0zsnso0","created":1752048351085,"text":""},"children":[]}]}]}]}]}]}]},{"data":{"id":"db7by4b1ce00","created":1752044518451,"text":"containerStatuses","expandState":"expand"},"children":[{"data":{"id":"db7db60ocyo0","created":1752048362023,"text":"ready: true"},"children":[{"data":{"id":"db7dbun4taw0","created":1752048415623,"text":"正常"},"children":[]}]},{"data":{"id":"db7dboksutk0","created":1752048402422,"text":"ready: false"},"children":[{"data":{"id":"db7dbse9yzs0","created":1752048410734,"text":"异常"},"children":[]}]},{"data":{"id":"db7bon4l6nk0","created":1752043775779,"text":"crashbackoff "},"children":[{"data":{"id":"db7bpgvkm8w0","created":1752043840537,"text":"过滤日志关键字"},"children":[{"data":{"id":"db7bplppjc80","created":1752043851066,"text":"at lease 416k, 栈内存太小"},"children":[{"data":{"id":"db7db0zsnso0","created":1752048351085,"text":""},"children":[]}]}]}]},{"data":{"id":"db7br0kymkw0","created":1752043961795,"text":"... ..."},"children":[]}]}]},{"data":{"id":"db7dauspt9k0","created":1752048337597,"text":"Unkown"},"children":[{"data":{"id":"db7dayutttc0","created":1752048346431,"text":"异常"},"children":[]}]}]}]},{"data":{"id":"db6hptxosns0","created":1751959235666,"text":"service诊断","layout_right_offset":{"x":48,"y":-8}},"children":[]},{"data":{"id":"db6hqv1i5pc0","created":1751959316438,"text":"... ...","layout_right_offset":{"x":60,"y":30}},"children":[]}]},{"data":{"id":"db7blrw5o540","created":1752043551060,"text":"如果ai，则传入信息智能诊断"},"children":[]},{"data":{"id":"db6ftoxm94w0","created":1751953896015,"text":"解决方案生成"},"children":[{"data":{"id":"db6g04n7cqg0","created":1751954400398,"text":"根据诊断结果生成针对性的解决方案"},"children":[]},{"data":{"id":"db6g0al4m740","created":1751954413334,"text":"提供具体命令或操作建议"},"children":[]}]}]},{"data":{"id":"db6ftr7sn7s0","created":1751953900984,"text":"结果整合"},"children":[]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}